<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @media print {
        body { print-color-adjust: exact; } }
        .invoice-table th { background: #667eea; 
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen py-8">
    <div class="container mx-auto max-w-5xl">
      <div class="bg-white rounded-lg shadow-lg sm:p-8 p-2 mb-6">
        <div class="flex justify-between items-start mb-8">
          <div>
            <h1 class="text-3xl font-bold text-gray-800 uppercase">order</h1>
            <p class="text-gray-600 mt-2">Order #ORD-2025-001</p>
            <p class="text-gray-600">Date: <span id="current-date"></span></p>
          </div>
          <div class="text-right">
            <h2 class="text-xl font-semibold text-gray-700">Camera Store</h2>
            <p class="text-gray-600">123 Tech Street</p>
            <p class="text-gray-600">Casablanca, Morocco</p>
          </div>
        </div>

        <div class="overflow-x-auto">
          <table class="invoice-table w-full border-collapse border border-gray-300">
            <thead>
              <tr class="text-white text-sm">
                <th class="border border-gray-300 px-4 py-3 text-left w-[81px]">Image</th>
                <th class="border border-gray-300 px-4 py-3 text-left">Référence</th>
                <th class="border border-gray-300 px-4 py-3 text-left">Description</th>
                <th class="border border-gray-300 px-4 py-3 text-center">Qté</th>
                <th class="border border-gray-300 px-4 py-3 text-right">Prix Unitaire</th>
                <th class="border border-gray-300 px-4 py-3 text-right">Total</th>
              </tr>
            </thead>
            <tbody id="products-tbody">
            </tbody>
          </table>
        </div>

        <div class="mt-8 flex justify-end">
          <div class="w-80 space-y-2">
            <div class="flex justify-between py-2 border-b border-gray-200">
              <span class="font-medium text-gray-600">Sous-total:</span>
              <span id="subtotal" class="font-semibold text-gray-800">0 DH</span>
            </div>
            <div class="flex justify-between py-2 border-b border-gray-200">
              <span class="font-medium text-gray-600">TVA (20%):</span>
              <span id="tax" class="font-semibold text-gray-800">0 DH</span>
            </div>
            <div class="flex justify-between py-3 border-b-2 border-gray-800">
              <span class="text-xl font-bold text-gray-800">Total TTC:</span>
              <span id="total" class="text-xl font-bold text-green-600">0 DH</span>
            </div>
          </div>
        </div>

        <div class="mt-8 bg-gray-50 p-4 rounded-lg">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
            <div>
              <p class="text-2xl font-bold text-blue-600" id="total-items">0</p>
              <p class="text-gray-600">Articles</p>
            </div>
            <div>
              <p class="text-2xl font-bold text-purple-600" id="total-quantity">0</p>
              <p class="text-gray-600">Quantité Total</p>
            </div>
            <div>
              <p class="text-2xl font-bold text-green-600" id="average-price">0 DH</p>
              <p class="text-gray-600">Prix Moyen</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const products = [
      {
            "img": "https://balkhirihamid.github.io/new/images/1755277009661.webp",
            "ref": "cruiser_Z_12",
            "desc": "cruiser zoom X12 fois",
            "color": "#DCDCDCFF",
            "prix": 1800,
            "qte": 1
      },
      {
            "img": "https://balkhirihamid.github.io/new/images/1755276817621.webp",
            "ref": "cell_go",
            "desc": "Cell Go full color",
            "color": "#fffff#f",
            "prix": 1600,
            "qte": 2
      },
      {
            "img": "https://balkhirihamid.github.io/new/images/1755276501106.webp",
            "ref": "imou_ptz",
            "desc": "camera imou I67 PTZ",
            "color": "#fffff#f",
            "prix": 1500,
            "qte": 1
      },
      {
            "img": "https://balkhirihamid.github.io/new/images/1755279694715.webp",
            "ref": "rex",
            "desc": "Rex camera 360°",
            "color": "#0E624BFF",
            "prix": 800,
            "qte": 2
      },
      {
            "img": "https://balkhirihamid.github.io/new/images/1755814430652.webp",
            "ref": "imou_2C",
            "desc": "Bullet 3",
            "color": "#F0F0F0FF",
            "prix": 400,
            "qte": 3
      }
];

      function formatPrice(price) {
        return price.toLocaleString('fr-FR') + ' DH';
      }

      function createProductRow(product, index) {
        const total = product.prix * product.qte;
        const rowClass = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';

        return `
          <tr class="${rowClass} hover:bg-blue-50 transition-colors">
            <td class="border border-gray-300 p-2">
              <img src="${product.img}" 
                alt="${product.desc}" 
                class="w-16 h-16 object-cover rounded border shadow-sm"
                onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNiAyNkgzOFYzOEgyNlYyNloiIHN0cm9rZT0iIzlDQTNBRiIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo='">
            </td>
            <td class="border border-gray-300 px-4 py-3">
              <span class="font-semibold text-blue-600 uppercase">${product.ref}</span>
            </td>
            <td class="border border-gray-300 px-4 py-3">
              <span class="font-medium text-gray-800 capitalize">${product.desc}</span>
            </td>
            <td class="border border-gray-300 px-4 py-3 text-center">
              <span class="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold">${product.qte}</span>
            </td>
            <td class="border border-gray-300 px-4 py-3 text-right font-semibold text-gray-700">
              ${formatPrice(product.prix)}
            </td>
            <td class="border border-gray-300 px-4 py-3 text-right font-bold text-green-600">
              ${formatPrice(total)}
            </td>
          </tr>
      `;
      }

      function calculateTotals() {
        const subtotal = products.reduce((sum, product) => sum + (product.prix * product.qte), 0);
        const total = subtotal;
        const totalItems = products.length;
        const totalQuantity = products.reduce((sum, product) => sum + product.qte, 0);

        document.getElementById('subtotal').textContent = formatPrice(subtotal);
        document.getElementById('total').textContent = formatPrice(subtotal);
        document.getElementById('total-items').textContent = totalItems;
        document.getElementById('total-quantity').textContent = totalQuantity;
        document.getElementById('average-price').textContent = formatPrice(subtotal);
      }

      function renderInvoice() {
        const today = new Date();
        document.getElementById('current-date').textContent = today.toLocaleDateString('fr-FR');

        const tbody = document.getElementById('products-tbody');
        tbody.innerHTML = products.map(createProductRow).join('');
        calculateTotals();
      }
      
      document.addEventListener('DOMContentLoaded', renderInvoice);
    </script>
    </body>
    </html>